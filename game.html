<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>You Can't Eat Cats Kevin - Game</title>

    <style>
        body {
            background-color: #ffffff;
            color: #000000;
            font-family: monospace;
            padding: 20px;
            font-size: 18px;
            line-height: 1.6;
        }
        #text {
            max-height: 70vh;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 20px;
            background-color: #ffffff;
        }
        #buttons {
            text-align: center;
            margin-bottom: 20px;
        }
        button {
            margin: 6px;
            padding: 10px 20px;
            background-color: #add8e6;
            color: #000000;
            border: 1px solid #87ceeb;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #87ceeb;
        }
    </style>
</head>
<body>

<h1>You Can't Eat Cats Kevin – The Game</h1>
<a href="index.html">⬅ Back to Home</a>

<div id="text"></div>
<div id="buttons"></div>

<script>
let moral = 100;
let lose_limit = 50;

const textEl = document.getElementById("text");
const buttonsEl = document.getElementById("buttons");

function log(msg) {
    textEl.innerHTML += msg + "<br>";
    textEl.scrollTop = textEl.scrollHeight;
}

function showButtons(options) {
    buttonsEl.innerHTML = "";
    options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt.label;
        btn.onclick = opt.action;
        buttonsEl.appendChild(btn);
    });
}

function status_check() {
    if (moral <= lose_limit) {
        log("Your moral has dropped too low. The citizens start a revolution. You lose the game.");
        buttonsEl.innerHTML = "";
        return false;
    }
    return true;
}

function moral_check() {
    if (moral >= 89) log("Citizens are thrilled<br>");
    else if (moral >= 79) log("Citizens are happy<br>");
    else if (moral >= 69) log("Citizens are ok<br>");
    else if (moral >= 50) log("Citizens are worried<br>");
}

function normal_event() {
    let roll = Math.random();
    let split_chance = 0.09;
    let unite_chance = 0.09;

    if (roll < split_chance) {
        log("Citizens are splitting. This will hurt moral.");
        let penalty = Math.floor(Math.random() * 6) + 3;
        moral -= penalty;
        log("Moral dropped by " + penalty);
    }
    else if (roll < split_chance + unite_chance) {
        log("Citizens unite. This improves moral.");
        let bonus = Math.floor(Math.random() * 6) + 3;
        moral += bonus;
        log("Moral increased by " + bonus);
    }
    else {
        log("Citizens calm down. Moral remains the same.");
    }
}

function choice1() {
    showButtons([
        {label: "yes", action: () => {
            log("You choose to follow democracy.");
            normal_event();
            next();
        }},
        {label: "no", action: () => {
            log("You choose not to follow democracy. Moral -20");
            moral -= 20;
            next();
        }}
    ]);
}

function choice2() {
    showButtons([
        {label: "yes", action: () => {
            log("You choose education.");
            normal_event();
            next();
        }},
        {label: "no", action: () => {
            log("You choose war and inflation focus. Moral -10");
            moral -= 10;
            next();
        }}
    ]);
}

function choice3() {
    log("Will you focus on terrorism over drugs/crime?");
    showButtons([
        {label: "yes", action: () => {
            let change = -1 * (Math.floor(Math.random() * 20) + 1);
            moral += change;
            log("Citizens are split. - " + Math.abs(change));
            next();
        }},
        {label: "no", action: () => {
            let change = -1 * (Math.floor(Math.random() * 20) + 1);
            moral += change;
            log("Citizens are split. - " + Math.abs(change));
            next();
        }}
    ]);
}

function choice4() {
    showButtons([
        {label: "yes", action: () => {
            log("You allow the right to bear arms.");
            if (Math.random() < 0.2) {
                let penalty = Math.floor(Math.random() * 6) + 3;
                moral -= penalty;
                log("Moral dropped by " + penalty);
            }
            next();
        }},
        {label: "no", action: () => {
            log("You deny the right to bear arms.");
            if (Math.random() < 0.2) {
                let bonus = Math.floor(Math.random() * 6) + 3;
                moral += bonus;
                log("Moral increased by " + bonus);
            }
            next();
        }}
    ]);
}

function choice5() {
    showButtons([
        {label: "anti-death penalty", action: () => {
            log("You choose to be Anti-death penalty.");
            normal_event();
            next();
        }},
        {label: "for death penalty", action: () => {
            log("You support the death penalty.");
            normal_event();
            next();
        }}
    ]);
}

let step = 0;

function next() {
    if (!status_check()) return;
    moral_check();
    step++;

    if (step === 1) choice1();
    else if (step === 2) choice2();
    else if (step === 3) choice3();
    else if (step === 4) choice4();
    else if (step === 5) choice5();
    else {
        log("You have finished the game!");
        buttonsEl.innerHTML = "";
    }
}

log("RULES FOR A NEW WORLD<br>");
log(
    "You are the new leader of a rising nation. Your decisions affect the people's moral. " +
    "If moral reaches 50 or lower, the citizens revolt and you lose.<br><br>"
);

next();
</script>

</body>
</html>
